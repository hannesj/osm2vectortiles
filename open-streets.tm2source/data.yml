_prefs: 
  disabled: []
  inspector: false
  mapid: ''
  rev: ''
  saveCenter: true
attribution: ''
center: 
  - -9.063
  - 36.5273
  - 4
description: Open Streets
Layer: 
  - id: landuse
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: geometry
      geometry_table: ''
      host: db
      key_field: osm_id
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, geometry, classify_landuse(type) as class, type
            FROM (
              SELECT osm_id, geometry, type FROM osm_landusages_gen0
              WHERE geometry && !bbox!
              AND type IN ('wood', 'nature_reserve', 'national_park', 'forest')
              AND (
                (
                  st_area(geometry) > 300000000
                  AND z(!scale_denominator!) = 5
                )
                OR
                (
                  st_area(geometry) > 100000000
                  AND z(!scale_denominator!) = 6
                )
                OR
                (
                  st_area(geometry) > 25000000
                  AND z(!scale_denominator!) = 7
                )
                OR
                (
                  st_area(geometry) > 5000000
                  AND z(!scale_denominator!) = 8
                )
                OR
                (
                  st_area(geometry) > 2000000
                  AND z(!scale_denominator!) = 9
                )
                OR
                (
                  st_area(geometry) > 500000
                  AND z(!scale_denominator!) = 10
                )
              )
              UNION ALL
              SELECT osm_id, geometry, type FROM osm_landusages_gen1
              WHERE geometry && !bbox!
              AND (
                  type IN ('wood', 'nature_reserve', 'national_park', 'forest')
                  AND st_area(geometry) > 100000
              )
              AND z(!scale_denominator!) = 11
              UNION ALL
              SELECT osm_id, geometry, type FROM osm_landusages
              WHERE geometry && !bbox!
              AND (
                (
                  type IN ('wood', 'nature_reserve', 'national_park', 'forest')
                  AND st_area(geometry) > 10000
                  AND z(!scale_denominator!) = 12
                )
                OR
                (
                  type NOT IN ('wetland', 'marsh', 'swamp', 'bog', 'mud', 'tidalflat')
                  AND z(!scale_denominator!) >= 13
                )
              )
            ) AS landusages
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      class: String
      osm_id: Number
      type: String
    properties: 
      "buffer-size": 4
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: waterway
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, geometry, type, type as class
          FROM osm_water_lines
          WHERE (
            geometry && !bbox! AND (
              (
                type IN ('river', 'canal')
                AND z(!scale_denominator!) >= 8
              )
              OR (
                type IN ('stream', 'stream_intermittent')
                AND z(!scale_denominator!) >= 13
              )
            )
          )
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      class: String
      osm_id: Number
      type: String
    properties: 
      "buffer-size": 4
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: water
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT 0 AS osm_id, ST_SimplifyPreserveTopology(way, 200) AS geometry FROM osm_ocean_polygons
          WHERE way && !bbox!
            AND z(!scale_denominator!) = 0
          UNION ALL
          SELECT 0 AS osm_id, way AS geometry FROM osm_ocean_polygons
          WHERE way && !bbox!
            AND z(!scale_denominator!) >= 1
          UNION ALL
          SELECT 0 AS osm_id, geom AS geometry FROM ne_110m_lakes
          WHERE geom && !bbox!
            AND z(!scale_denominator!) between 0 AND 1
          UNION ALL
          SELECT 0 AS osm_id, geom AS geometry FROM ne_50m_lakes
          WHERE geom && !bbox!
            AND z(!scale_denominator!) BETWEEN 2 AND 3
          UNION ALL
          SELECT 0 AS osm_id, geom AS geometry FROM ne_10m_lakes
          WHERE geom && !bbox!
            AND z(!scale_denominator!) BETWEEN 4 AND 5
          UNION ALL
          SELECT osm_id, geometry FROM osm_water_polygons_gen1
          WHERE geometry && !bbox!
          AND z(!scale_denominator!) BETWEEN 6 AND 12
          UNION ALL
          SELECT osm_id, geometry FROM osm_water_polygons
          WHERE geometry && !bbox!
          AND z(!scale_denominator!) > 12
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      osm_id: Number
    properties: 
      "buffer-size": 8
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: aeroway
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: geometry
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, geometry, type
          FROM osm_aero_lines
          WHERE geometry && !bbox!
            AND z(!scale_denominator!) >= 12
          UNION ALL
          SELECT osm_id, geometry, type
          FROM osm_aero_polygons
          WHERE geometry && !bbox!
            AND z(!scale_denominator!) >= 12
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      osm_id: Number
      type: String
    properties: 
      "buffer-size": 4
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: barrier_line
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, geometry, classify_barrier_line(type) AS class
          FROM (
            SELECT osm_id, geometry, type FROM osm_barrier_lines
            WHERE geometry && !bbox!
              AND z(!scale_denominator!) >= 14
            UNION ALL
            SELECT osm_id, geometry, type FROM osm_barrier_polygons
            WHERE geometry && !bbox!
              AND z(!scale_denominator!) >= 14
          ) AS barrier_line
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      class: String
      osm_id: Number
    properties: 
      "buffer-size": 4
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: building
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: geometry
      geometry_table: ''
      host: db
      key_field: osm_id
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, geometry
          FROM (
            SELECT osm_id, geometry
            FROM osm_buildings_gen0
            WHERE geometry && !bbox!
              AND z(!scale_denominator!) >= 13
            UNION ALL
            SELECT osm_id, geometry
            FROM osm_buildings
            WHERE geometry && !bbox!
              AND z(!scale_denominator!) >= 14
          ) AS building
          ORDER BY ST_YMin(ST_Envelope(geometry)) DESC
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      osm_id: Number
    properties: 
      "buffer-size": 2
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: landuse_overlay
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: geometry
      geometry_table: ''
      host: db
      key_field: osm_id
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, geometry, classify_landuse_overlay(type) AS class
          FROM (
            SELECT osm_id, geometry, type FROM osm_landusages_gen0
            WHERE type IN ('wetland', 'marsh', 'swamp', 'bog', 'mud', 'tidalflat')
            AND geometry && !bbox!
            AND (
              (
                st_area(geometry) > 20000000
                AND z(!scale_denominator!) = 7
              )
              OR
              (
                st_area(geometry) > 6000000
                AND z(!scale_denominator!) = 8
              )
              OR
              (
                st_area(geometry) > 2000000
                AND z(!scale_denominator!) = 9
              )
              OR
              (
                st_area(geometry) > 500000
                AND z(!scale_denominator!) = 10
              )
            )
            UNION ALL
            SELECT osm_id, geometry, type FROM osm_landusages_gen1
            WHERE type IN ('wetland', 'marsh', 'swamp', 'bog', 'mud', 'tidalflat')
            AND geometry && !bbox!
            AND z(!scale_denominator!) BETWEEN 11 AND 12
            UNION ALL
            SELECT osm_id, geometry, type FROM osm_landusages
            WHERE type IN ('wetland', 'marsh', 'swamp', 'bog', 'mud', 'tidalflat')
            AND geometry && !bbox!
            AND z(!scale_denominator!) >= 13
          ) AS landuse_overlay
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      class: String
      osm_id: Number
    properties: 
      "buffer-size": 4
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: tunnel
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: geometry
      geometry_table: ''
      host: db
      key_field: osm_id
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, geometry, classify_road(type) AS class, type, layer, oneway
          FROM (
            SELECT osm_id, geometry, type, layer, oneway
            FROM osm_roads
            WHERE z(!scale_denominator!) >= 10
              AND geometry && !bbox!
              AND is_tunnel
            UNION ALL
            SELECT osm_id, geometry, type, layer, oneway
            FROM osm_road_polygons
            WHERE z(!scale_denominator!) >= 10
              AND geometry && !bbox!
              AND is_tunnel
          ) ALL_TUNNELS
          ORDER BY layer ASC
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      class: String
      layer: Number
      oneway: Number
      osm_id: Number
      type: String
    properties: 
      "buffer-size": 4
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: road
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: geometry
      geometry_table: ''
      host: db
      key_field: osm_id
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, geometry, type, classify_road_railway(type, service) AS class, oneway
          FROM (
            SELECT osm_id, geometry, type, service, oneway, z_order
            FROM osm_roads
            WHERE geometry && !bbox! AND (
                -- Do not show bridges and tunnels after z12
                z(!scale_denominator!) < 12 OR (NOT is_bridge AND NOT is_tunnel)
            )
            AND (
              (
                type IN ('motorway', 'trunk')
                AND z(!scale_denominator!) >= 5
              )
              OR (
                type IN ('primary', 'motorway_link', 'primary_link', 'trunk_link')
                AND z(!scale_denominator!) >= 7
              )
              OR (
                type IN ('secondary', 'secondary_link')
                AND z(!scale_denominator!) >= 8
              )
              OR (
                type IN ('tertiary', 'teriary_link')
                AND z(!scale_denominator!) >= 11
              )
              OR (
                classify_road(type) IN ('major_rail', 'street')
                AND z(!scale_denominator!) >= 12
                AND NOT is_bridge AND NOT is_tunnel
              )
              OR (
                classify_road(type) IN ('minor_rail', 'street_limited', 'service')
                AND z(!scale_denominator!) >= 13
              )
              OR (
                z(!scale_denominator!) >= 14
              )
            )
            UNION ALL
            SELECT osm_id, geometry, type, service, oneway, z_order
            FROM osm_road_polygons
            WHERE geometry && !bbox! AND (
                -- Do not show bridges and tunnels after z12
                z(!scale_denominator!) < 12 OR (NOT is_bridge AND NOT is_tunnel)
            )
            AND (
              (
                type IN ('motorway', 'trunk')
                AND z(!scale_denominator!) >= 5
              )
              OR (
                type IN ('primary', 'motorway_link', 'primary_link', 'trunk_link')
                AND z(!scale_denominator!) >= 7
              )
              OR (
                type IN ('secondary', 'secondary_link')
                AND z(!scale_denominator!) >= 8
              )
              OR (
                type IN ('tertiary', 'teriary_link')
                AND z(!scale_denominator!) >= 11
              )
              OR (
                classify_road(type) IN ('major_rail', 'street')
                AND z(!scale_denominator!) >= 12
                AND NOT is_bridge AND NOT is_tunnel
              )
              OR (
                classify_road(type) IN ('minor_rail', 'street_limited', 'service')
                AND z(!scale_denominator!) >= 13
              )
              OR (
                z(!scale_denominator!) >= 14
              )
            )
          ) ALL_ROADS ORDER BY z_order ASC
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      class: String
      oneway: Number
      osm_id: Number
      type: String
    properties: 
      "buffer-size": 4
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: bridge
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: geometry
      geometry_table: ''
      host: db
      key_field: osm_id
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        ( 
          SELECT osm_id, geometry, classify_road(type) AS class, type, layer, oneway
          FROM (
            SELECT osm_id, geometry, type, layer, oneway
            FROM osm_roads
            WHERE z(!scale_denominator!) >= 12 
              AND geometry && !bbox! 
              AND is_bridge
            UNION ALL
            SELECT osm_id, geometry, type, layer, oneway
            FROM osm_road_polygons
            WHERE z(!scale_denominator!) >= 12 
              AND geometry && !bbox! 
              AND is_bridge
          ) ALL_BRIDGES
          ORDER BY layer ASC
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      class: String
      layer: Number
      oneway: Number
      osm_id: Number
      type: String
    properties: 
      "buffer-size": 4
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: admin
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT 0 AS osm_id, geom, 2 AS admin_level, 0 AS disputed, 0 AS maritime
          FROM ne_110m_admin_0_boundary_lines_land
          WHERE z(!scale_denominator!) BETWEEN 0 AND 2
            AND geom && !bbox!
          UNION ALL
          SELECT 0 AS osm_id, geom, 2 AS admin_level, 0 AS disputed, 0 AS maritime
          FROM ne_50m_admin_0_boundary_lines_land
          WHERE z(!scale_denominator!) = 3
            AND geom && !bbox!
          UNION ALL
          SELECT 0 AS osm_id, geom, 2 AS admin_level, 0 AS disputed, 0 AS maritime
          FROM ne_10m_admin_0_boundary_lines_land
          WHERE z(!scale_denominator!) BETWEEN 4 AND 6
            AND geom && !bbox!
          UNION ALL
          SELECT osm_id, geometry AS geom, admin_level, 0 AS disputed, maritime
          FROM osm_admin
          WHERE maritime = 1
            AND admin_level = 2
            AND z(!scale_denominator!) >= 2
            AND geometry && !bbox!
          UNION ALL
          SELECT 0 AS osm_id, geom, 4 AS admin_level, 0 AS disputed, 0 AS maritime
          FROM ne_50m_admin_1_states_provinces_lines
          WHERE z(!scale_denominator!) = 1
            AND scalerank = 2
            AND geom && !bbox!
          UNION ALL
          SELECT 0 AS osm_id, geom, 4 AS admin_level, 0 AS disputed, 0 AS maritime
          FROM ne_10m_admin_1_states_provinces_lines_shp
          WHERE z(!scale_denominator!) BETWEEN 2 AND 6
            AND scalerank = 2
            AND geom && !bbox!
          UNION ALL
          SELECT 0 AS osm_id, geom, 4 AS admin_level, 0 AS disputed, 0 AS maritime
          FROM ne_10m_admin_1_states_provinces_lines_shp
          WHERE z(!scale_denominator!) BETWEEN 4 AND 6
            AND scalerank BETWEEN 3 AND 6
            AND geom && !bbox!
          UNION ALL
          SELECT 0 AS osm_id, geom, 4 AS admin_level, 0 AS disputed, 0 AS maritime
          FROM ne_10m_admin_1_states_provinces_lines_shp
          WHERE z(!scale_denominator!) = 6
            AND scalerank BETWEEN 7 AND 9
            AND geom && !bbox!
          UNION ALL
          SELECT osm_id, geometry AS geom, admin_level, 0 AS disputed, maritime
          FROM osm_admin
          WHERE maritime = 0
            AND ( admin_level = 2 OR admin_level = 4 )
            AND z(!scale_denominator!) >= 7
            AND geometry && !bbox!
          UNION ALL
          SELECT 0 AS osm_id, geom, 2 AS admin_level, 1 AS disputed, 0 AS maritime
          FROM ne_10m_admin_0_boundary_lines_disputed_areas
          WHERE z(!scale_denominator!) >= 7
            AND geom && !bbox!
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      admin_level: Number
      disputed: Number
      maritime: Number
      osm_id: Number
    properties: 
      "buffer-size": 4
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: country_label
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: wkb_geometry
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, wkb_geometry,
          iso3166_1_alpha_2 as code,
          name,
          coalesce(NULLIF(name_en, ''), name) AS name_en,
          coalesce(NULLIF(name_es, ''), name) AS name_es,
          coalesce(NULLIF(name_fr, ''), name) AS name_fr,
          coalesce(NULLIF(name_de, ''), name) AS name_de,
          coalesce(NULLIF(name_ru, ''), name) AS name_ru,
          coalesce(NULLIF(name_zh, ''), name) AS name_zh, 
          rank as scalerank
          FROM custom_countries
          WHERE (
            (
              rank <= 1
              AND z(!scale_denominator!) = 1 AND wkb_geometry && !bbox!
            )
            OR
            (
              rank <= 2
              AND z(!scale_denominator!) >= 2 AND wkb_geometry && !bbox!
            )
            OR
            (
              rank <= 4
              AND z(!scale_denominator!) >= 3 AND wkb_geometry && !bbox!
            )
            OR
            (
              rank <= 5
              AND z(!scale_denominator!) >= 4 AND wkb_geometry && !bbox!
            )
            OR
            (
              rank <= 6
              AND z(!scale_denominator!) >= 5 AND wkb_geometry && !bbox!
            )
            OR
            (
              rank >= 7
              AND z(!scale_denominator!) >= 6 AND wkb_geometry && !bbox!
            )
          )
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      code: String
      name: String
      name_de: String
      name_en: String
      name_es: String
      name_fr: String
      name_ru: String
      name_zh: String
      osm_id: Number
      scalerank: Number
    properties: 
      "buffer-size": 256
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: marine_label
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, wkb_geometry,
          name,
          coalesce(NULLIF(name_en, ''), name) AS name_en,
          coalesce(NULLIF(name_es, ''), name) AS name_es,
          coalesce(NULLIF(name_fr, ''), name) AS name_fr,
          coalesce(NULLIF(name_de, ''), name) AS name_de,
          coalesce(NULLIF(name_ru, ''), name) AS name_ru,
          coalesce(NULLIF(name_zh, ''), name) AS name_zh, 
          case when GeometryType(wkb_geometry) = 'LINESTRING' then 'line'
               else 'POINT' end as placement,
          rank AS labelrank
          FROM custom_seas
          WHERE wkb_geometry && !bbox! AND (
            (
              rank = 1 AND z(!scale_denominator!) >= 1
            )
            OR (
              rank = 2 AND z(!scale_denominator!) >= 2
            )
            OR (
              rank = 3 AND z(!scale_denominator!) >= 3
            )
            OR (
              rank = 4 AND z(!scale_denominator!) >= 4
            )
            OR (
              rank = 5 AND z(!scale_denominator!) >= 5
            )
            OR (
              rank = 6 AND z(!scale_denominator!) >= 6
            )
          )
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      labelrank: Number
      name: String
      name_de: String
      name_en: String
      name_es: String
      name_fr: String
      name_ru: String
      name_zh: String
      osm_id: String
      placement: String
    properties: 
      "buffer-size": 256
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: state_label
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, wkb_geometry, abbr,
          area_sqkm as area,
          name,
          coalesce(NULLIF(name_en, ''), name) AS name_en,
          coalesce(NULLIF(name_es, ''), name) AS name_es,
          coalesce(NULLIF(name_fr, ''), name) AS name_fr,
          coalesce(NULLIF(name_de, ''), name) AS name_de,
          coalesce(NULLIF(name_ru, ''), name) AS name_ru,
          coalesce(NULLIF(name_zh, ''), name) AS name_zh
          FROM custom_states
          WHERE wkb_geometry && !bbox! AND (
            (
              area_sqkm > 90000 AND z(!scale_denominator!) >= 4
            )
            OR (
              z(!scale_denominator!) >= 5
            )
          )
        ) AS states
      type: postgis
      user: osm
    description: ''
    fields: 
      abbr: String
      area: Number
      name: String
      name_de: String
      name_en: String
      name_es: String
      name_fr: String
      name_ru: String
      name_zh: String
      osm_id: Number
    properties: 
      "buffer-size": 256
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: place_label
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: geometry
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
        SELECT osm_id, geometry,  
        name,
        coalesce(NULLIF(name_en, ''), name) AS name_en,
        coalesce(NULLIF(name_es, ''), name) AS name_es,
        coalesce(NULLIF(name_fr, ''), name) AS name_fr,
        coalesce(NULLIF(name_de, ''), name) AS name_de,
        coalesce(NULLIF(name_ru, ''), name) AS name_ru,
        coalesce(NULLIF(name_zh, ''), name) AS name_zh, 
        type,
        CASE WHEN is_capital THEN 1 ELSE NULL END AS capital,
        NULL AS ldir,
        normalize_scalerank(scalerank) AS scalerank,
        rank() OVER (PARTITION BY LabelGrid(geometry, 200 * !pixel_width!)
                     ORDER BY scalerank ASC NULLS LAST,
                              population DESC NULLS LAST
        ) as localrank
        FROM osm_places
        WHERE geometry && !bbox! AND name <> ''
        AND (
          (
            scalerank < 3 AND scalerank IS NOT NULL
            AND z(!scale_denominator!) >= 4
          )
          OR (
            scalerank < 8 AND scalerank IS NOT NULL
            AND z(!scale_denominator!) >= 6
          )
          OR (
            scalerank IS NOT NULL
            AND z(!scale_denominator!) >= 7
          )
          OR (
            type IN ('city', 'town')
            AND z(!scale_denominator!) >= 8
          )
          OR (
            type IN ('town', 'district')
            AND z(!scale_denominator!) >= 9
          )
          OR (
            type = 'village'
            AND z(!scale_denominator!) >= 11
          )
          OR (
            type IN ('hamlet', 'suburb','neighbourhood')
            AND z(!scale_denominator!) >= 13
          )
          OR z(!scale_denominator!) >= 14
        )
        ORDER BY population DESC NULLS LAST
        ) as data
      type: postgis
      user: osm
    description: ''
    fields: 
      capital: String
      ldir: String
      localrank: Number
      name: String
      name_de: String
      name_en: String
      name_es: String
      name_fr: String
      name_ru: String
      name_zh: String
      osm_id: Number
      scalerank: String
      type: String
    properties: 
      "buffer-size": 128
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: water_label
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT ST_PointOnSurface(geometry) AS geometry, osm_id,
          name,
          area,
          coalesce(NULLIF(name_en, ''), name) AS name_en,
          coalesce(NULLIF(name_es, ''), name) AS name_es,
          coalesce(NULLIF(name_fr, ''), name) AS name_fr,
          coalesce(NULLIF(name_de, ''), name) AS name_de,
          coalesce(NULLIF(name_ru, ''), name) AS name_ru,
          coalesce(NULLIF(name_zh, ''), name) AS name_zh
          FROM osm_water_polygons
          WHERE geometry && !bbox! AND
          (
            (
              area >= 100000000
              AND z(!scale_denominator!) >= 10
            )
            OR (
              area >= 40000000
              AND z(!scale_denominator!) >= 11
            )
            OR (
              area >= 20000000
              AND z(!scale_denominator!) >= 12
            )
            OR (
              area >= 10000000
              AND z(!scale_denominator!) >= 13
            )
            OR z(!scale_denominator!) >= 14
          )
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      area: Number
      name: String
      name_de: String
      name_en: String
      name_es: String
      name_fr: String
      name_ru: String
      name_zh: String
      osm_id: Number
    properties: 
      "buffer-size": 64
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: poi_label
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT geometry, osm_id, ref, website, poi_network(type) as network,
              poi_address(housenumber, street, place, city, country, postcode) as address,
              name,
              coalesce(NULLIF(name_en, ''), name) AS name_en,
              coalesce(NULLIF(name_es, ''), name) AS name_es,
              coalesce(NULLIF(name_fr, ''), name) AS name_fr,
              coalesce(NULLIF(name_de, ''), name) AS name_de,
              coalesce(NULLIF(name_ru, ''), name) AS name_ru,
              coalesce(NULLIF(name_zh, ''), name) AS name_zh,
              format_type(type) AS type,
              scalerank_poi(type, area) AS scalerank,
              rank() OVER (PARTITION BY LabelGrid(geometry, 128 * !pixel_width!)
                           ORDER BY localrank_poi(type) ASC) AS localrank,
              classify_maki_label(type) AS maki
            FROM (
              SELECT geometry, osm_id, ref, website, housenumber, street, place, city, country, postcode,
              name, name_en, name_es, name_fr, name_de, name_ru, name_zh,
              type, 0 AS area
              FROM osm_poi_points
              WHERE z(!scale_denominator!) >= 14 AND geometry && !bbox! AND name <> ''
              UNION ALL
              SELECT topoint(geometry) AS geometry, osm_id, ref, website, housenumber, street, place, city, country, postcode,
              name, name_en, name_es, name_fr, name_de, name_ru, name_zh,
              type, area
              FROM osm_poi_polygons
              WHERE z(!scale_denominator!) >= 14 AND geometry && !bbox! AND name <> ''
            ) AS poi_label
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      address: String
      localrank: Number
      maki: String
      name: String
      name_de: String
      name_en: String
      name_es: String
      name_fr: String
      name_ru: String
      name_zh: String
      network: String
      osm_id: Number
      ref: String
      scalerank: Number
      type: String
      website: String
    properties: 
      "buffer-size": 128
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: road_label
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: geometry
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT geometry, osm_id, name,
            coalesce(NULLIF(name_en, ''), name) AS name_en,
            coalesce(NULLIF(name_es, ''), name) AS name_es,
            coalesce(NULLIF(name_fr, ''), name) AS name_fr,
            coalesce(NULLIF(name_de, ''), name) AS name_de,
            coalesce(NULLIF(name_ru, ''), name) AS name_ru,
            coalesce(NULLIF(name_zh, ''), name) AS name_zh,
            nullif(ref, '') AS ref,
            nullif(char_length(ref), 0) AS reflen,
            round(MercLength(geometry)) as len,
            classify_road(type) as class,
            'default' as shield,
            rank() OVER (
                PARTITION BY LabelGrid(geometry, 200 * !pixel_width!)
                ORDER BY localrank_road(type) ASC, round(MercLength(geometry)) DESC
            ) AS localrank
            FROM (
              SELECT *
              FROM osm_roads
              WHERE
              geometry && !bbox! AND
                (
                  (
                    type IN ('motorway')
                    AND ref <> ''
                    AND z(!scale_denominator!) >= 8
                  )
                  OR
                  (
                    type IN ('motorway_link', 'primary', 'primary_link', 'trunk',
                             'trunk_link', 'secondary', 'secondary_link')
                    AND (name <> '' OR ref <> '')
                    AND z(!scale_denominator!) >= 11
                  )
                  OR
                  (
                    type IN ('tertiary', 'tertiary_link', 'residential', 'unclassified',
                        'living_street', 'pedestrian', 'construction', 'rail', 'monorail',
                        'narrow_gauge', 'subway', 'tram')
                    AND name <> ''
                    AND z(!scale_denominator!) >= 12
                  )
                  OR
                  (
                    type IN ('service', 'track', 'driveway', 'path',
                             'cycleway', 'ski', 'steps', 'bridleway', 'footway', 'funicular',
                             'light_rail', 'preserved')
                    AND name <> ''
                    AND z(!scale_denominator!) >= 14
                  )
                )
              UNION ALL
              SELECT *
              FROM osm_road_polygons
              WHERE
                geometry && !bbox! AND
                (
                  (
                    type IN ('motorway')
                    AND ref <> ''
                    AND z(!scale_denominator!) >= 8
                  )
                  OR
                  (
                    type IN ('motorway_link', 'primary', 'primary_link', 'trunk',
                             'trunk_link', 'secondary', 'secondary_link')
                    AND (name <> '' OR ref <> '')
                    AND z(!scale_denominator!) >= 11
                  )
                  OR
                  (
                    type IN ('tertiary', 'tertiary_link', 'residential', 'unclassified',
                        'living_street', 'pedestrian', 'construction', 'rail', 'monorail',
                        'narrow_gauge', 'subway', 'tram')
                    AND name <> ''
                    AND z(!scale_denominator!) >= 12
                  )
                  OR
                  (
                    type IN ('service', 'track', 'driveway', 'path',
                             'cycleway', 'ski', 'steps', 'bridleway', 'footway', 'funicular',
                             'light_rail', 'preserved')
                    AND name <> ''
                    AND z(!scale_denominator!) >= 14
                  )
                )
            ) ALL_ROAD_LABELS  
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      class: String
      len: Number
      localrank: Number
      name: String
      name_de: String
      name_en: String
      name_es: String
      name_fr: String
      name_ru: String
      name_zh: String
      osm_id: Number
      ref: String
      reflen: Number
      shield: String
    properties: 
      "buffer-size": 64
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: waterway_label
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: geometry
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT geometry, osm_id,
          name,
          coalesce(NULLIF(name_en, ''), name) AS name_en,
          coalesce(NULLIF(name_es, ''), name) AS name_es,
          coalesce(NULLIF(name_fr, ''), name) AS name_fr,
          coalesce(NULLIF(name_de, ''), name) AS name_de,
          coalesce(NULLIF(name_ru, ''), name) AS name_ru,
          coalesce(NULLIF(name_zh, ''), name) AS name_zh,
          type, type as class
          FROM osm_water_lines
          WHERE geometry && !bbox! AND (
            (
              type in ('river', 'canal')
              AND z(!scale_denominator!) >= 8
              AND linelabel(z(!scale_denominator!), name, geometry)
              AND geometry && !bbox!
            )
            OR (
              type in ('stream', 'stream_intermittent')
              AND z(!scale_denominator!) >= 13
              AND linelabel(z(!scale_denominator!), name, geometry)
              AND geometry && !bbox!
            )
          )
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      class: String
      name: String
      name_de: String
      name_en: String
      name_es: String
      name_fr: String
      name_ru: String
      name_zh: String
      osm_id: Number
      type: String
    properties: 
      "buffer-size": 8
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
  - id: housenum_label
    Datasource: 
      dbname: osm
      extent: -20037508.34,-20037508.34,20037508.34,20037508.34
      geometry_field: ''
      geometry_table: ''
      host: db
      key_field: ''
      key_field_as_attribute: ''
      max_size: 512
      password: osm
      port: 5432
      srid: ''
      table: |-
        (
          SELECT osm_id, geometry, house_num
          FROM
          (
            SELECT osm_id, geometry, house_num 
            FROM osm_housenumbers_points
            WHERE geometry && !bbox! 
              AND z(!scale_denominator!) >= 14
            UNION ALL
            SELECT osm_id, topoint(geometry) AS geometry, house_num
            FROM osm_housenumbers_polygons
            WHERE geometry && !bbox! 
              AND z(!scale_denominator!) >= 14
          ) AS housenumbers
        ) AS data
      type: postgis
      user: osm
    description: ''
    fields: 
      house_num: String
      osm_id: Number
    properties: 
      "buffer-size": 64
    srs: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs +over
maxzoom: 14
minzoom: 0
name: Open Streets
